"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var fs_1 = require("fs");
var path = require("path");
var nxCheck = "\n// nx-check\nif (process.argv.indexOf('update') > -1) {\n  console.log(\"This is an Nx workspace, and it provides an enhanced 'update' command.\");\n  console.log('Please run \"npm run update\" or \"yarn update\" instead.');\n  process.exit(1);\n}\n// nx-check-end\n";
function patchNg() {
    var ngBin = path.join('node_modules', '@angular', 'cli', 'bin', 'ng');
    if (fileExists(ngBin)) {
        var file = fs_1.readFileSync(ngBin).toString();
        fs_1.writeFileSync(ngBin, addNxCheck(file));
    }
}
exports.patchNg = patchNg;
function addNxCheck(file) {
    if (file.indexOf('nx-check') > -1)
        return file;
    return file.replace("'use strict';", "'use strict';" + nxCheck);
}
function fileExists(filePath) {
    try {
        return fs_1.statSync(filePath).isFile();
    }
    catch (err) {
        return false;
    }
}
