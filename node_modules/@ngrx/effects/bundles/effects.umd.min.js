!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@ngrx/store"),require("rxjs/observable/merge"),require("rxjs/operator/ignoreElements"),require("rxjs/operator/materialize"),require("rxjs/operator/map"),require("@angular/core"),require("rxjs/Observable"),require("rxjs/operators"),require("rxjs/operator/groupBy"),require("rxjs/operator/mergeMap"),require("rxjs/operator/exhaustMap"),require("rxjs/operator/dematerialize"),require("rxjs/operator/filter"),require("rxjs/Subject")):"function"==typeof define&&define.amd?define(["exports","@ngrx/store","rxjs/observable/merge","rxjs/operator/ignoreElements","rxjs/operator/materialize","rxjs/operator/map","@angular/core","rxjs/Observable","rxjs/operators","rxjs/operator/groupBy","rxjs/operator/mergeMap","rxjs/operator/exhaustMap","rxjs/operator/dematerialize","rxjs/operator/filter","rxjs/Subject"],e):e((r.ngrx=r.ngrx||{},r.ngrx.effects={}),r.ngrx.store,r.Rx.Observable,r.Rx.Observable.prototype,r.materialize,r.map,r.ng.core,r.Rx,r.operators,r.groupBy,r.mergeMap,r.exhaustMap,r.dematerialize,r.Rx.Observable.prototype,r.Subject)}(this,function(r,e,t,o,n,a,c,i,u,s,f,p,l,d,y){"use strict";function g(r){var e=(void 0===r?{dispatch:!0}:r).dispatch;return function(r,t){!function(r,e){var t=r.constructor,o=t.hasOwnProperty(O)?t[O]:Object.defineProperty(t,O,{value:[]})[O];Array.prototype.push.apply(o,e)}(r,[{propertyName:t,dispatch:e}])}}function x(r){return Object.getPrototypeOf(r)}function h(r){var e=x(r).constructor.name,c=S(r).map(function(t){var c=t.propertyName,i=t.dispatch,u="function"==typeof r[c]?r[c]():r[c];if(!1===i)return o.ignoreElements.call(u);var s=n.materialize.call(u);return a.map.call(s,function(t){return{effect:r[c],notification:t,propertyName:c,sourceName:e,sourceInstance:r}})});return t.merge.apply(void 0,c)}function m(r){var e=h(r);return function(r){var e=x(r);return M in e&&"function"==typeof e[M]}(r)?r.ngrxOnRunEffects(e):e}function v(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return u.filter(function(e){return r.some(function(r){return r===e.type})})}function j(r,e){!function(r,e){"E"===r.notification.kind&&e.handleError(r.notification.error)}(r,e),function(r,e){if("N"===r.notification.kind){var t=r.notification.value;!function(r){return r&&r.type&&"string"==typeof r.type}(t)&&e.handleError(new Error("Effect "+function(r){var e=r.propertyName,t=r.sourceInstance,o=r.sourceName,n="function"==typeof t[e];return'"'+o+"."+e+(n?"()":"")+'"'}(r)+" dispatched an invalid action: "+t))}}(r,e)}function b(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r}var E=function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])};return function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),O="__@ngrx/effects__",S=e.compose(function(r){return r.constructor[O]||[]},x),M="ngrxOnRunEffects",_=function(r){function e(e){var t=r.call(this)||this;return e&&(t.source=e),t}return E(e,r),e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.ofType=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return v.apply(void 0,r)(this)},e}(i.Observable);_.decorators=[{type:c.Injectable}],_.ctorParameters=function(){return[{type:i.Observable,decorators:[{type:c.Inject,args:[e.ScannedActionsSubject]}]}]};var q=function(r){function e(e){var t=r.call(this)||this;return t.errorHandler=e,t}return E(e,r),e.prototype.addEffects=function(r){this.next(r)},e.prototype.toActions=function(){var r=this;return f.mergeMap.call(s.groupBy.call(this,x),function(e){return l.dematerialize.call(d.filter.call(a.map.call(p.exhaustMap.call(e,m),function(e){return j(e,r.errorHandler),e.notification}),function(r){return"N"===r.kind}))})},e}(y.Subject);q.decorators=[{type:c.Injectable}],q.ctorParameters=function(){return[{type:c.ErrorHandler}]};new c.InjectionToken("ngrx/effects: Immediate Effects");var I=new c.InjectionToken("ngrx/effects: Root Effects"),N=new c.InjectionToken("ngrx/effects: Feature Effects"),P=function(){function r(r,e){this.effectSources=r,this.store=e,this.effectsSubscription=null}return r.prototype.start=function(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))},r.prototype.ngOnDestroy=function(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)},r}();P.decorators=[{type:c.Injectable}],P.ctorParameters=function(){return[{type:q},{type:e.Store}]};var R="@ngrx/effects/init",w=function(){function r(r,e,t,o,n,a){this.sources=r,e.start(),o.forEach(function(e){return r.addEffects(e)}),t.dispatch({type:R})}return r.prototype.addEffects=function(r){this.sources.addEffects(r)},r}();w.decorators=[{type:c.NgModule,args:[{}]}],w.ctorParameters=function(){return[{type:q},{type:P},{type:e.Store},{type:Array,decorators:[{type:c.Inject,args:[I]}]},{type:e.StoreRootModule,decorators:[{type:c.Optional}]},{type:e.StoreFeatureModule,decorators:[{type:c.Optional}]}]};var z=function(){return function(r,e,t,o){this.root=r,e.forEach(function(e){return e.forEach(function(e){return r.addEffects(e)})})}}();z.decorators=[{type:c.NgModule,args:[{}]}],z.ctorParameters=function(){return[{type:w},{type:Array,decorators:[{type:c.Inject,args:[N]}]},{type:e.StoreRootModule,decorators:[{type:c.Optional}]},{type:e.StoreFeatureModule,decorators:[{type:c.Optional}]}]};var A=function(){function r(){}return r.forFeature=function(r){return{ngModule:z,providers:[r,{provide:N,multi:!0,deps:r,useFactory:b}]}},r.forRoot=function(r){return{ngModule:w,providers:[P,q,_,r,{provide:I,deps:r,useFactory:b}]}},r}();A.decorators=[{type:c.NgModule,args:[{}]}],A.ctorParameters=function(){return[]},r.Effect=g,r.getEffectsMetadata=function(r){var e={};return S(r).forEach(function(r){var t=r.propertyName,o=r.dispatch;e[t]={dispatch:o}}),e},r.mergeEffects=h,r.Actions=_,r.ofType=v,r.EffectsModule=A,r.EffectSources=q,r.ROOT_EFFECTS_INIT=R,r.ɵc=z,r.ɵa=b,r.ɵb=w,r.ɵf=P,r.ɵe=N,r.ɵd=I,Object.defineProperty(r,"__esModule",{value:!0})});