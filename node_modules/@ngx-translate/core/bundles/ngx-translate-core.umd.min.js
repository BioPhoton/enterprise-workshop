!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngx-translate/core",["exports","@angular/core","rxjs","rxjs/operators"],n):n((t["ngx-translate"]=t["ngx-translate"]||{},t["ngx-translate"].core={}),t.ng.core,t.rxjs,t.Rx.Observable.prototype)}(this,function(t,n,e,r){"use strict";function a(t,n){function e(){this.constructor=t}h(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}function i(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}function o(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,a,i=e.call(t),o=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(e=i["return"])&&e.call(i)}finally{if(a)throw a.error}}return o}function s(t,n){if(t===n)return!0;if(null===t||null===n)return!1;if(t!=t&&n!=n)return!0;var e,r,a,i=typeof t;if(i==typeof n&&"object"==i){if(!Array.isArray(t)){if(Array.isArray(n))return!1;a=Object.create(null);for(r in t){if(!s(t[r],n[r]))return!1;a[r]=!0}for(r in n)if(!(r in a)&&"undefined"!=typeof n[r])return!1;return!0}if(!Array.isArray(n))return!1;if((e=t.length)==n.length){for(r=0;r<e;r++)if(!s(t[r],n[r]))return!1;return!0}}return!1}function u(t){return void 0!==t&&null!==t}function l(t){return t&&"object"==typeof t&&!Array.isArray(t)}function c(t,n){var e=Object.assign({},t);return l(t)&&l(n)&&Object.keys(n).forEach(function(r){l(n[r])?r in t?e[r]=c(t[r],n[r]):Object.assign(e,(a={},a[r]=n[r],a)):Object.assign(e,(i={},i[r]=n[r],i));var a,i}),e}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])},f=function(){return function(){}}(),g=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.prototype.getTranslation=function(t){return e.of({})},n}(f);g.decorators=[{type:n.Injectable}],g.ctorParameters=function(){return[]};var p=function(){return function(){}}(),d=function(){function t(){}return t.prototype.handle=function(t){return t.key},t}();d.decorators=[{type:n.Injectable}],d.ctorParameters=function(){return[]};var y=function(){return function(){}}(),v=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.prototype.compile=function(t,n){return t},n.prototype.compileTranslations=function(t,n){return t},n}(y);v.decorators=[{type:n.Injectable}],v.ctorParameters=function(){return[]};var b=function(){return function(){}}(),L=function(t){function n(){var n=t.apply(this,function(){for(var t=[],n=0;n<arguments.length;n++)t=t.concat(o(arguments[n]));return t}(arguments))||this;return n.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g,n}return a(n,t),n.prototype.interpolate=function(t,n){return"string"==typeof t?this.interpolateString(t,n):"function"==typeof t?this.interpolateFunction(t,n):t},n.prototype.getValue=function(t,n){var e=n.split(".");n="";do{n+=e.shift(),!u(t)||!u(t[n])||"object"!=typeof t[n]&&e.length?e.length?n+=".":t=undefined:(t=t[n],n="")}while(e.length);return t},n.prototype.interpolateFunction=function(t,n){return t(n)},n.prototype.interpolateString=function(t,n){var e=this;return n?t.replace(this.templateMatcher,function(t,r){var a=e.getValue(n,r);return u(a)?a:t}):t},n}(b);L.decorators=[{type:n.Injectable}],L.ctorParameters=function(){return[]};var m=function(){return function(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new n.EventEmitter,this.onLangChange=new n.EventEmitter,this.onDefaultLangChange=new n.EventEmitter}}(),C=new n.InjectionToken("USE_STORE"),T=new n.InjectionToken("USE_DEFAULT_LANG"),w=function(){function t(t,e,r,a,i,o,s){void 0===o&&(o=!0),void 0===s&&(s=!1),this.store=t,this.currentLoader=e,this.compiler=r,this.parser=a,this.missingTranslationHandler=i,this.useDefaultLang=o,this.isolate=s,this.pending=!1,this._onTranslationChange=new n.EventEmitter,this._onLangChange=new n.EventEmitter,this._onDefaultLangChange=new n.EventEmitter,this._langs=[],this._translations={},this._translationRequests={}}return Object.defineProperty(t.prototype,"onTranslationChange",{get:function(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onLangChange",{get:function(){return this.isolate?this._onLangChange:this.store.onLangChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDefaultLangChange",{get:function(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultLang",{get:function(){return this.isolate?this._defaultLang:this.store.defaultLang},set:function(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLang",{get:function(){return this.isolate?this._currentLang:this.store.currentLang},set:function(t){this.isolate?this._currentLang=t:this.store.currentLang=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langs",{get:function(){return this.isolate?this._langs:this.store.langs},set:function(t){this.isolate?this._langs=t:this.store.langs=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"translations",{get:function(){return this.isolate?this._translations:this.store.translations},set:function(t){this.isolate?this._translations=t:this.store.translations=t},enumerable:!0,configurable:!0}),t.prototype.setDefaultLang=function(t){var n=this;if(t!==this.defaultLang){var e=this.retrieveTranslations(t);void 0!==e?(this.defaultLang||(this.defaultLang=t),e.pipe(r.take(1)).subscribe(function(e){n.changeDefaultLang(t)})):this.changeDefaultLang(t)}},t.prototype.getDefaultLang=function(){return this.defaultLang},t.prototype.use=function(t){var n=this;if(t===this.currentLang)return e.of(this.translations[t]);var a=this.retrieveTranslations(t);return void 0!==a?(this.currentLang||(this.currentLang=t),a.pipe(r.take(1)).subscribe(function(e){n.changeLang(t)}),a):(this.changeLang(t),e.of(this.translations[t]))},t.prototype.retrieveTranslations=function(t){var n;return"undefined"==typeof this.translations[t]&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),n=this._translationRequests[t]),n},t.prototype.getTranslation=function(t){var n=this;return this.pending=!0,this.loadingTranslations=this.currentLoader.getTranslation(t).pipe(r.share()),this.loadingTranslations.pipe(r.take(1)).subscribe(function(e){n.translations[t]=n.compiler.compileTranslations(e,t),n.updateLangs(),n.pending=!1},function(t){n.pending=!1}),this.loadingTranslations},t.prototype.setTranslation=function(t,n,e){void 0===e&&(e=!1),n=this.compiler.compileTranslations(n,t),e&&this.translations[t]?this.translations[t]=c(this.translations[t],n):this.translations[t]=n,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})},t.prototype.getLangs=function(){return this.langs},t.prototype.addLangs=function(t){var n=this;t.forEach(function(t){-1===n.langs.indexOf(t)&&n.langs.push(t)})},t.prototype.updateLangs=function(){this.addLangs(Object.keys(this.translations))},t.prototype.getParsedResult=function(t,n,a){var o;if(n instanceof Array){var s={},u=!1;try{for(var l=i(n),c=l.next();!c.done;c=l.next()){s[p=c.value]=this.getParsedResult(t,p,a),"function"==typeof s[p].subscribe&&(u=!0)}}catch(C){v={error:C}}finally{try{c&&!c.done&&(b=l["return"])&&b.call(l)}finally{if(v)throw v.error}}if(u){var h=void 0;try{for(var f=i(n),g=f.next();!g.done;g=f.next()){var p=g.value,d="function"==typeof s[p].subscribe?s[p]:e.of(s[p]);h=void 0===h?d:e.merge(h,d)}}catch(T){L={error:T}}finally{try{g&&!g.done&&(m=f["return"])&&m.call(f)}finally{if(L)throw L.error}}return h.pipe(r.toArray(),r.map(function(t){var e={};return t.forEach(function(t,r){e[n[r]]=t}),e}))}return s}if(t&&(o=this.parser.interpolate(this.parser.getValue(t,n),a)),void 0===o&&this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(o=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],n),a)),void 0===o){var y={key:n,translateService:this};void 0!==a&&(y.interpolateParams=a),o=this.missingTranslationHandler.handle(y)}return void 0!==o?o:n;var v,b,L,m},t.prototype.get=function(t,n){var r=this;if(!u(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return e.Observable.create(function(e){var a=function(t){e.next(t),e.complete()},i=function(t){e.error(t)};r.loadingTranslations.subscribe(function(e){"function"==typeof(e=r.getParsedResult(r.compiler.compileTranslations(e,r.currentLang),t,n)).subscribe?e.subscribe(a,i):a(e)},i)});var a=this.getParsedResult(this.translations[this.currentLang],t,n);return"function"==typeof a.subscribe?a:e.of(a)},t.prototype.stream=function(t,n){var a=this;if(!u(t)||!t.length)throw new Error('Parameter "key" required');return e.concat(this.get(t,n),this.onLangChange.pipe(r.switchMap(function(r){var i=a.getParsedResult(r.translations,t,n);return"function"==typeof i.subscribe?i:e.of(i)})))},t.prototype.instant=function(t,n){if(!u(t)||!t.length)throw new Error('Parameter "key" required');var e=this.getParsedResult(this.translations[this.currentLang],t,n);if("undefined"!=typeof e.subscribe){if(t instanceof Array){var r={};return t.forEach(function(n,e){r[t[e]]=t[e]}),r}return t}return e},t.prototype.set=function(t,n,e){void 0===e&&(e=this.currentLang),this.translations[e][t]=this.compiler.compile(n,e),this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})},t.prototype.changeLang=function(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),this.defaultLang||this.changeDefaultLang(t)},t.prototype.changeDefaultLang=function(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})},t.prototype.reloadLang=function(t){return this.resetLang(t),this.getTranslation(t)},t.prototype.resetLang=function(t){this._translationRequests[t]=undefined,this.translations[t]=undefined},t.prototype.getBrowserLang=function(){if("undefined"==typeof window||"undefined"==typeof window.navigator)return undefined;var t=window.navigator.languages?window.navigator.languages[0]:null;return-1!==(t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage).indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t},t.prototype.getBrowserCultureLang=function(){if("undefined"==typeof window||"undefined"==typeof window.navigator)return undefined;var t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage},t}();w.decorators=[{type:n.Injectable}],w.ctorParameters=function(){return[{type:m},{type:f},{type:y},{type:b},{type:p},{type:undefined,decorators:[{type:n.Inject,args:[T]}]},{type:undefined,decorators:[{type:n.Inject,args:[C]}]}]};var P=function(){function t(t,n,e){var r=this;this.translateService=t,this.element=n,this._ref=e,this.onTranslationChangeSub||(this.onTranslationChangeSub=this.translateService.onTranslationChange.subscribe(function(t){t.lang===r.translateService.currentLang&&r.checkNodes(!0,t.translations)})),this.onLangChangeSub||(this.onLangChangeSub=this.translateService.onLangChange.subscribe(function(t){r.checkNodes(!0,t.translations)})),this.onDefaultLangChangeSub||(this.onDefaultLangChangeSub=this.translateService.onDefaultLangChange.subscribe(function(t){r.checkNodes(!0)}))}return Object.defineProperty(t.prototype,"translate",{set:function(t){t&&(this.key=t,this.checkNodes())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"translateParams",{set:function(t){s(this.currentParams,t)||(this.currentParams=t,this.checkNodes(!0))},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewChecked=function(){this.checkNodes()},t.prototype.checkNodes=function(t,n){void 0===t&&(t=!1);var e=this.element.nativeElement.childNodes;e.length||(this.setContent(this.element.nativeElement,this.key),e=this.element.nativeElement.childNodes);for(var r=0;r<e.length;++r){var a=e[r];if(3===a.nodeType){var i=void 0;if(this.key)i=this.key,t&&(a.lastKey=null);else{var o=this.getContent(a),s=o.trim();s.length&&(o!==a.currentValue?(i=s,a.originalContent=this.getContent(a)):a.originalContent&&t&&(a.lastKey=null,i=a.originalContent.trim()))}this.updateValue(i,a,n)}}},t.prototype.updateValue=function(t,n,e){var r=this;if(t){if(n.lastKey===t&&this.lastParams===this.currentParams)return;this.lastParams=this.currentParams;var a=function(e){e!==t&&(n.lastKey=t),n.originalContent||(n.originalContent=r.getContent(n)),n.currentValue=u(e)?e:n.originalContent||t,r.setContent(n,r.key?n.currentValue:n.originalContent.replace(t,n.currentValue)),r._ref.markForCheck()};if(u(e)){var i=this.translateService.getParsedResult(e,t,this.currentParams);"function"==typeof i.subscribe?i.subscribe(a):a(i)}else this.translateService.get(t,this.currentParams).subscribe(a)}},t.prototype.getContent=function(t){return u(t.textContent)?t.textContent:t.data},t.prototype.setContent=function(t,n){u(t.textContent)?t.textContent=n:t.data=n},t.prototype.ngOnDestroy=function(){this.onLangChangeSub&&this.onLangChangeSub.unsubscribe(),this.onDefaultLangChangeSub&&this.onDefaultLangChangeSub.unsubscribe(),this.onTranslationChangeSub&&this.onTranslationChangeSub.unsubscribe()},t}();P.decorators=[{type:n.Directive,args:[{selector:"[translate],[ngx-translate]"}]}],P.ctorParameters=function(){return[{type:w},{type:n.ElementRef},{type:n.ChangeDetectorRef}]},P.propDecorators={translate:[{type:n.Input}],translateParams:[{type:n.Input}]};var _=function(){function t(t,n){this.translate=t,this._ref=n,this.value=""}return t.prototype.updateValue=function(t,n,e){var r=this,a=function(n){r.value=n!==undefined?n:t,r.lastKey=t,r._ref.markForCheck()};if(e){var i=this.translate.getParsedResult(e,t,n);"function"==typeof i.subscribe?i.subscribe(a):a(i)}this.translate.get(t,n).subscribe(a)},t.prototype.transform=function(t){for(var n=this,e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!t||0===t.length)return t;if(s(t,this.lastKey)&&s(e,this.lastParams))return this.value;var a;if(u(e[0])&&e.length)if("string"==typeof e[0]&&e[0].length){var i=e[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{a=JSON.parse(i)}catch(o){throw new SyntaxError("Wrong parameter in TranslatePipe. Expected a valid Object, received: "+e[0])}}else"object"!=typeof e[0]||Array.isArray(e[0])||(a=e[0]);return this.lastKey=t,this.lastParams=e,this.updateValue(t,a),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(function(e){n.lastKey&&e.lang===n.translate.currentLang&&(n.lastKey=null,n.updateValue(t,a,e.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(function(e){n.lastKey&&(n.lastKey=null,n.updateValue(t,a,e.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(function(){n.lastKey&&(n.lastKey=null,n.updateValue(t,a))})),this.value},t.prototype._dispose=function(){"undefined"!=typeof this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=undefined),"undefined"!=typeof this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=undefined),"undefined"!=typeof this.onDefaultLangChange&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=undefined)},t.prototype.ngOnDestroy=function(){this._dispose()},t}();_.decorators=[{type:n.Injectable},{type:n.Pipe,args:[{name:"translate",pure:!1}]}],_.ctorParameters=function(){return[{type:w},{type:n.ChangeDetectorRef}]};var j=function(){function t(){}return t.forRoot=function(n){return void 0===n&&(n={}),{ngModule:t,providers:[n.loader||{provide:f,useClass:g},n.compiler||{provide:y,useClass:v},n.parser||{provide:b,useClass:L},n.missingTranslationHandler||{provide:p,useClass:d},m,{provide:C,useValue:n.isolate},{provide:T,useValue:n.useDefaultLang},w]}},t.forChild=function(n){return void 0===n&&(n={}),{ngModule:t,providers:[n.loader||{provide:f,useClass:g},n.compiler||{provide:y,useClass:v},n.parser||{provide:b,useClass:L},n.missingTranslationHandler||{provide:p,useClass:d},{provide:C,useValue:n.isolate},{provide:T,useValue:n.useDefaultLang},w]}},t}();j.decorators=[{type:n.NgModule,args:[{declarations:[_,P],exports:[_,P]}]}],j.ctorParameters=function(){return[]},t.TranslateModule=j,t.TranslateLoader=f,t.TranslateFakeLoader=g,t.USE_STORE=C,t.USE_DEFAULT_LANG=T,t.TranslateService=w,t.MissingTranslationHandler=p,t.FakeMissingTranslationHandler=d,t.TranslateParser=b,t.TranslateDefaultParser=L,t.TranslateCompiler=y,t.TranslateFakeCompiler=v,t.TranslateDirective=P,t.TranslatePipe=_,t.ɵa=m,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-translate-core.umd.min.js.map
